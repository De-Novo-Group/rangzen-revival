<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tester's Guide</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 16px;
        }
        h1 { color: #bb86fc; font-size: 24px; margin-bottom: 16px; }
        h2 { color: #03dac6; font-size: 18px; margin: 24px 0 12px 0; border-bottom: 1px solid #333; padding-bottom: 8px; }
        h3 { color: #cf6679; font-size: 16px; margin: 16px 0 8px 0; }
        p { margin-bottom: 12px; }
        ul, ol { margin: 12px 0 12px 24px; }
        li { margin-bottom: 8px; }
        code { background: #2d2d44; padding: 2px 6px; border-radius: 4px; font-size: 14px; }
        .warning { 
            background: rgba(207, 102, 121, 0.2); 
            border-left: 4px solid #cf6679; 
            padding: 12px; 
            margin: 16px 0; 
            border-radius: 4px;
        }
        .info {
            background: rgba(3, 218, 198, 0.1);
            border-left: 4px solid #03dac6;
            padding: 12px;
            margin: 16px 0;
            border-radius: 4px;
        }
        hr { border: none; border-top: 1px solid #333; margin: 24px 0; }
    </style>
</head>
<body>
    <h1>Murmur Tester's Guide</h1>
    
    <div class="warning">
        <strong>QA Testing Mode</strong> sends diagnostic data to De Novo Group's server via internet (WiFi or cellular).
        <br><br>
        <strong>What IS sent:</strong>
        <ul>
            <li>Device model &amp; app version</li>
            <li>A hashed device ID (to track same device over time)</li>
            <li>Exchange statistics (peer counts, success rates)</li>
            <li>Error logs for debugging</li>
            <li>Location of exchanges (if location permission granted)</li>
            <li>Your IP address (visible to our server)</li>
        </ul>
        <br>
        <strong>What is NOT sent:</strong>
        <ul>
            <li>Your messages or their content</li>
            <li>Your friend list</li>
            <li>Your pseudonym</li>
            <li>Phone number or real identity</li>
        </ul>
        <br>
        This mode also enables automatic app updates via internet.
        <br><br>
        <strong>⚠️ Do NOT enable in high-risk environments (Iran, etc.)</strong>
    </div>

    <h2>1. Getting Started</h2>
    
    <h3>Install &amp; Setup</h3>
    <ol>
        <li><strong>Install:</strong> Get the APK via direct download or from another user (Settings → Share App).</li>
        <li><strong>Permissions:</strong> Grant <strong>Location</strong> (for discovery) and <strong>Bluetooth/Nearby Devices</strong>.</li>
        <li><strong>Enable:</strong> Ensure the "Enable Murmur" toggle in Settings is ON.</li>
    </ol>

    <h3>The "Feed"</h3>
    <ul>
        <li>This is where messages appear.</li>
        <li><strong>Pull to Refresh:</strong> Forces a refresh and triggers an immediate scan for peers.</li>
        <li><strong>Trust Bar:</strong> Colored bar on the left (Green=Friend, Yellow=Neutral).</li>
        <li><strong>Like (Heart):</strong> Local bookmark. Saves the message to your device.</li>
    </ul>

    <hr>

    <h2>2. Testing Scenarios</h2>

    <h3>Scenario A: Basic Exchange (Bluetooth)</h3>
    <ul>
        <li><strong>Setup:</strong> Two phones (A and B) with Bluetooth ON.</li>
        <li><strong>Action:</strong>
            <ol>
                <li>Phone A posts a message: "Hello World".</li>
                <li>Place phones near each other (1-5 meters).</li>
                <li>Wait 30-60 seconds.</li>
            </ol>
        </li>
        <li><strong>Result:</strong> Phone B receives "Hello World".</li>
    </ul>

    <h3>Scenario B: Wi-Fi Direct (Long Range)</h3>
    <ul>
        <li><strong>Setup:</strong> Two phones (A and B).</li>
        <li><strong>Action:</strong>
            <ol>
                <li>Ensure both have Wi-Fi enabled (not necessarily connected to a router).</li>
                <li>Phone A posts a message.</li>
                <li>Wait. You may see a system popup: <em>"Invitation to connect from..."</em></li>
                <li><strong>Accept</strong> the connection.</li>
            </ol>
        </li>
        <li><strong>Result:</strong> High-speed exchange occurs. This is used for syncing many messages at once.</li>
    </ul>

    <h3>Scenario C: Friend Trust</h3>
    <ul>
        <li><strong>Setup:</strong> Two phones (A and B).</li>
        <li><strong>Action:</strong>
            <ol>
                <li>Phone A: Go to <strong>Friends</strong> tab → <strong>Show QR</strong>.</li>
                <li>Phone B: Go to <strong>Friends</strong> tab → <strong>Scan QR</strong>.</li>
                <li>Scan Phone A's code.</li>
                <li>Phone A posts a message.</li>
            </ol>
        </li>
        <li><strong>Result:</strong> On Phone B, the message appears with a <strong>Green</strong> trust bar.</li>
    </ul>

    <h3>Scenario D: Import Contacts</h3>
    <ul>
        <li><strong>Setup:</strong> Two phones (A and B). Ensure Phone A has Phone B's real number in Android Contacts.</li>
        <li><strong>Action:</strong>
            <ol>
                <li>Phone A: Go to <strong>Friends</strong> → <strong>Import Contacts</strong>.</li>
                <li>Grant permission.</li>
            </ol>
        </li>
        <li><strong>Result:</strong> If Phone B is nearby and also using Murmur, they should eventually appear as a Friend.</li>
    </ul>

    <hr>

    <h2>3. Troubleshooting</h2>

    <div class="info">
        <strong>"No peers nearby"</strong>
        <ul>
            <li>Is "Enable Murmur" ON?</li>
            <li>Is Bluetooth ON?</li>
            <li>Is Location Permission granted? (Crucial for Android 10+)</li>
            <li>Are you within range? (BLE ~10m, Wi-Fi ~50m)</li>
        </ul>
    </div>

    <div class="info">
        <strong>"Messages not arriving"</strong>
        <ul>
            <li>Be patient. Discovery runs periodically to save battery.</li>
            <li>Pull-to-refresh on the Feed to force a scan.</li>
        </ul>
    </div>

    <div class="info">
        <strong>"App crashes"</strong>
        <ul>
            <li>If testing a dev build, you may need to <strong>Clear Storage</strong> if the database schema changed.</li>
            <li>Settings → Apps → Murmur → Storage → Clear Data.</li>
        </ul>
    </div>

    <hr>

    <h2>4. Reporting Bugs</h2>
    <p>If you find an issue, please report:</p>
    <ol>
        <li>Phone Model (e.g., Pixel 5, Samsung S21).</li>
        <li>Android Version (e.g., Android 13).</li>
        <li>What you were doing (e.g., "Scanned QR code").</li>
        <li>What happened (e.g., "App froze").</li>
    </ol>

</body>
</html>
